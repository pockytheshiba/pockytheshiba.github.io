<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>Travel Firstï½œå°æ—…ä¼´å®¶æ—å¿ƒç†æ¸¬é©—</title>
<meta name="theme-color" content="#DFC740" />
<meta property="og:image" content="https://static.wixstatic.com/media/ba9378_72d7afcd2a9841cdb3df6087515a323f~mv2.png" />
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<style>
  :root{--bg:#DFC740; --text:#133D50; --card:#ffffff; --muted:#345e72; --ring:#133D50; --shadow:0 8px 24px rgba(0,0,0,.10)}
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);font-family:"Noto Sans TC",ui-sans-serif,system-ui,-apple-system,"PingFang TC","Microsoft JhengHei",Arial,sans-serif}
  .container{max-width:960px;margin:0 auto;padding:16px}
  @media(min-width:768px){ .container{padding:24px} }
  .banner{width:100%;height:auto;border-radius:12px;margin-bottom:10px}
  .card{background:var(--card);border-radius:18px;box-shadow:var(--shadow);padding:18px;margin-bottom:16px}
  @media(min-width:768px){ .card{border-radius:20px;padding:24px;margin-bottom:20px} }
  .btn{appearance:none;display:inline-flex;align-items:center;justify-content:center;gap:8px;background:var(--text);color:var(--bg);border:0;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;font-size:15px;line-height:1;text-decoration:none}
  .btn:active{transform:translateY(1px)} .btn.secondary{background:#fff;color:var(--text);border:2px solid var(--text)}
  .btn.big{padding:14px 20px;font-size:16px;border-radius:14px}
  .center{display:flex;gap:8px;justify-content:center;align-items:center;flex-wrap:wrap}
  .muted{color:var(--muted)}
  .progress{height:8px;background:rgba(19,61,80,.2);border-radius:999px;overflow:hidden;margin:8px 0 12px}
  .bar{height:100%;width:0;background:linear-gradient(90deg,#133D50,#0f3142)}
  .qtitle{font-size:22px;font-weight:800;margin:2px 0 8px}
  .qbody{font-size:16px;margin:0 0 6px;white-space:pre-line}
  @media(min-width:768px){ .qtitle{font-size:28px} .qbody{font-size:18px} }
  .opt{display:flex;align-items:flex-start;gap:10px;border:1.5px solid rgba(19,61,80,.25);border-radius:14px;padding:14px 16px;margin:10px 0;background:#fff;transition:.12s;touch-action:manipulation}
  .opt:active{transform:scale(.998)} .opt input{margin-top:2px;transform:scale(1.2)} .opt-text{flex:1;font-size:16px} .opt.selected{border-color:var(--ring)}
  .navRow{display:flex;gap:8px;justify-content:center;margin-top:10px} .navRow .btn{flex:0 0 auto}
  .result{display:none;text-align:center} .result.show{display:block;animation:fade .35s ease}
  @keyframes fade{from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:none}}
  .imgWrap{width:100%;display:flex;justify-content:center;margin-bottom:12px}
  #charImg{height:auto;max-height:640px;width:auto;max-width:100%;object-fit:contain;border:none;background:transparent;margin-bottom:-24px}
  .videos{display:flex;gap:12px;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:4px;justify-content:center}
  .videoCard{background:#fff;border:1px solid rgba(19,61,80,.2);border-radius:14px;overflow:hidden;flex:0 0 clamp(240px,45vw,420px);scroll-snap-align:start;text-align:left}
  .videoReason{font-size:12px;color:var(--muted);padding:8px 10px}
  .videoThumb{display:block;position:relative;width:100%;aspect-ratio:16/9;overflow:hidden}
  .videoThumb img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
  .partners{display:flex;gap:12px;justify-content:center;align-items:stretch;flex-wrap:nowrap}
  .partner{display:flex;flex-direction:column;align-items:center;gap:10px;border:1px solid rgba(19,61,80,.2);border-radius:14px;padding:12px;background:#fff;text-align:center}
  .partner .thumb{width:160px;height:160px;border-radius:18px;overflow:hidden}
  .partner .thumb img{width:100%;height:100%;object-fit:contain;display:block;background:transparent}
  .partner .meta{font-size:14px}
  .partner .meta .why{margin-top:4px;color:var(--muted)}
  footer{margin:20px 0;text-align:center;color:var(--muted);font-size:12px}
  .overlay{position:fixed;inset:0;background:#DFC740;display:flex;align-items:center;justify-content:center;z-index:9999;transition:.4s;opacity:1;pointer-events:auto}
  .overlay.hide{opacity:0;pointer-events:none} .plane{width:56px;height:56px;border-radius:50%;border:4px solid rgba(19,61,80,.25);border-top-color:#133D50;animation:spin 1s linear infinite;margin-bottom:12px}
  @keyframes spin{to{transform:rotate(360deg)}}
  .promo{background:transparent;border:0;border-radius:0;padding:0;display:inline-flex;align-items:center;gap:10px}
  .promo strong{font-size:16px}
  .promo .btn{font-size:14px;padding:10px 14px}
  @media(min-width:768px){ .promo strong{font-size:18px} .promo .btn{font-size:15px} }
  #intro{text-align:center}
  #loading{text-align:center}
#heroImg{display:none}

#heroImg{justify-content:center; align-items:center; padding-top:14px; margin:10px 0 6px;}
#charImg{max-height:640px; width:auto; height:auto; max-width:100%; object-fit:contain; background:transparent; border:none; margin:0;}
#result #title{margin-top:6px;}
.shareBlock{margin-top:16px; text-align:center}
.shareBlock h3{margin:0 0 8px; font-size:16px; font-weight:800}
.shareRow{display:flex; justify-content:center; align-items:center; gap:14px; flex-wrap:nowrap}
.iconBtn{appearance:none; background:transparent; border:0; padding:0; cursor:pointer; line-height:0}
.iconBtn img{display:block; width:56px; height:56px; object-fit:contain}
@media(min-width:768px){ .iconBtn img{width:64px; height:64px} }

  .smalltext{font-size:15px; line-height:1.6; margin-top:2px}
  @media(min-width:768px){ .smalltext{font-size:16px} }

  /* Intro images: centered + responsive */
  .intro-img{
    display:block;
    margin:16px auto;
    width:100%;
    max-width:300px;
    height:auto;
  }
  @media (max-width: 767px){
    .intro-img{ width:70%; max-width:none; }
  }

  
  /*BTN_SIZE_TUNED*/
  .btn{ font-size: 1.2em; padding: 0.9em 1.2em; }
  .btn.big{ font-size: 1.8em; padding: 1.2em 1.6em; }

  @media (max-width: 768px) {
    #topBanner img {
      width: 95% !important;
      max-width: 95% !important;
    }
  }
</style>
</head>
<body>
<div id="overlay" class="overlay">
  <div style="display:flex;flex-direction:column;align-items:center;text-align:center;color:#133D50">
    <div class="plane"></div>
    <div>åˆå§‹åŒ–ä¸­ï¼Œæ­£åœ¨ç‚ºä½ æ•´ç†ç™»æ©Ÿè³‡è¨Šâ€¦</div>
  </div>
</div>

<div class="container">
  
<div id="topBanner" style="text-align:center; padding:8px 0;">
  <img src="https://static.wixstatic.com/media/ba9378_ab27a556851549cc94b0a0b36abc861a~mv2.png" alt="banner" style="width:80%; max-width:80%; height:auto; display:inline-block;">
</div>
<div class="card" id="intro">
    <p style="text-align:center; font-family:'Noto Sans TC',sans-serif; font-size:1.1em; line-height:1.8;">
      é‚£æ˜¯ä¸€å€‹æ¸…æ™¨<br>æ©Ÿå ´çš„å»£æ’­æ­£æ’­æ”¾è‘—ç†Ÿæ‚‰çš„æ—‹å¾‹
    </p>
    <img src="https://static.wixstatic.com/media/ba9378_c7658e27e63e455186ef53f5f51256ef~mv2.png" alt="intro1" class="intro-img">

    <p style="text-align:center; font-family:'Noto Sans TC',sans-serif; font-size:1.1em; line-height:1.8;">
      ä½ æ‹‰è‘—è¡Œæ<br>æŠ¬é ­æœ›å‘å‡ºç™¼å¤§å»³çš„èˆªç­è¢å¹•<br>ä¸Šé¢é–ƒçˆè‘—ä¸€è¡Œå¥‡å¦™çš„å­—æ¨£
    </p>
    <img src="https://static.wixstatic.com/media/ba9378_ac03e8c8ca6a4d2c8647dc3843ac182a~mv2.png" alt="intro2" class="intro-img">

    <p style="text-align:center; font-family:'Noto Sans TC',sans-serif; font-size:1.1em; line-height:1.8;">
      ã€Œ<strong>Travel Firstï¼šå‰å¾€æœªçŸ¥çš„æ—…ç¨‹</strong>ã€
    </p>

    <p style="text-align:center; font-family:'Noto Sans TC',sans-serif; font-size:1.1em; line-height:1.8;">
      <span style="line-height:1.6;"><span style="line-height:1.6; display:inline-block; text-align:center;">
    ä½ æ·±å¸ä¸€å£æ°£ï¼Œæº–å‚™ç™»æ©Ÿ<br>
    ç™»æ©Ÿé–€å‰<br>
    äº”ä½å„æœ‰å€‹æ€§çš„æ—…äººæ­£ç­‰è‘—ä½ 
</span></span>
    </p>
    <img src="https://static.wixstatic.com/media/ba9378_e79ea078aa014f1cae8eb861a3d11050~mv2.png" alt="intro3" class="intro-img">

    <p style="text-align:center; font-family:'Noto Sans TC',sans-serif; font-size:1.1em; line-height:1.8;">
      ä»–å€‘é½Šè²èªªï¼š<br>ã€Œè·Ÿæˆ‘å€‘ä¸€èµ·å»æ—…è¡Œå§ï¼ã€
    </p>

    <p style="text-align:center; font-family:'Noto Sans TC',sans-serif; font-size:1.1em; line-height:1.8;">
      é€™è¶Ÿæ—…ç¨‹å°‡å¸¶ä½ ç¶“æ­·ç¾å¥½æ™‚å…‰ã€å†’éšªèˆ‡é©šå–œã€‚<br>æº–å‚™å¥½äº†å—ï¼Ÿ
    </p>

    <p style="text-align:center; font-weight:bold; font-size:1.2em;">ç™»æ©Ÿå£é–‹å•Ÿï¼</p>

    <p class="muted" style="text-align:center;margin-top:6px">
      <em>*æœ¬æ¸¬é©—ä¸€å…±12é¡Œï¼Œä½œç­”ç´„éœ€3åˆ†é˜*</em>
    </p>

    <div class="center" style="margin-top:8px; text-align:center;">
      <button class="btn big" id="startBtn">æº–å‚™å‡ºç™¼</button>
    </div>
</div>

  <div class="card" id="quiz" style="display:none">
    <div class="progress"><div class="bar" id="bar"></div></div>
    <div id="questionContainer"></div>
    <div class="navRow" id="navRow">
      <button class="btn secondary" id="prevBtn">å›ä¸Šä¸€é¡Œ</button>
      <button class="btn" id="nextBtn">ä¸‹ä¸€é¡Œ</button>
    </div>
  </div>

  <div class="card loading" id="loading" style="display:none">
    <img src="https://static.wixstatic.com/media/ba9378_0dcab262076146d0be483ee81333fe6a~mv2.png" alt="è§’è‰²å‰ªå½±" style="width:auto;max-height:160px;margin:6px auto 0;display:block" />
    <div class="plane" style="margin-left:auto;margin-right:auto"></div>
    <p style="white-space:pre-line; margin: 0 auto; text-align: center">
å»£æ’­éŸ¿èµ·â€”â€”
ã€Œè«‹æ—…å®¢ç¹«å¥½å®‰å…¨å¸¶ï¼Œæ‚¨å±¬æ–¼å“ªç¨®æ—…ä¼´é¡å‹å‘¢ï¼Ÿæˆ‘å€‘å³å°‡æ­æ›‰ã€‚ã€
ä½ æœ›è‘—çª—å¤–çš„é›²æµ·ï¼Œå›æƒ³èµ·å‰›å‰›çš„æ¯ä¸€æ¬¡é¸æ“‡ã€‚
æ˜¯å³èˆˆçš„éˆæ„Ÿï¼Ÿé‚„æ˜¯ç²¾æº–çš„è¨ˆç•«ï¼Ÿ
æ¯å€‹ç­”æ¡ˆï¼Œéƒ½æ˜¯ä½ æ—…è¡Œéˆé­‚çš„ç·šç´¢ã€‚
ç³»çµ±æ­£åœ¨æ¯”å°ç™»æ©Ÿç´€éŒ„ä¸­â€¦â€¦
â€”â€”æº–å‚™è¿æ¥å±¬æ–¼ä½ çš„æ—…ä¼´äººæ ¼å§ï¼
    </p>
  </div>

  <div id="heroImg" class="imgWrap" style="background:#DFC740;" style="display:none;"><img id="charImg" alt="è§’è‰²æ’åœ–" /></div>
  <div class="card result" id="result">
    <div id="resContent" style="text-align:center">
      <h2 id="title"></h2>
      <p class="muted" id="subtitle"></p>
      <p id="quote"></p>

      <h2 id="vidsTitle" style="margin-top:16px">é€™äº›å½±ç‰‡æœ€é©åˆä½ </h2>
      <div class="videos" id="videos"></div>

      <h2 id="partnersTitle" style="margin:16px 0 8px">ä½ é©åˆä¸€èµ·æ—…è¡Œçš„æ—…ä¼´</h2>
      <div class="partners" id="partners"></div>
    </div>

    <div class="shareBlock"><h3>å°‡çµæœåˆ†äº«è‡³ï¼š</h3><div class="shareRow"><div class="shareRow"><button class="iconBtn" id="shareLine" aria-label="Share to LINE"><img src="https://static.wixstatic.com/media/ba9378_76e7805d6e5a47f9b75b99d452aa89ba~mv2.png" alt="LINE" /></button><button class="iconBtn" id="shareFB" aria-label="Share to Facebook"><img src="https://static.wixstatic.com/media/ba9378_3bc563ef22974bd4adb473284cc8ca1a~mv2.png" alt="Facebook" /></button><button class="iconBtn" id="shareThreads" aria-label="Share to Threads"><img src="https://static.wixstatic.com/media/ba9378_f4fc9178433844e99014caf2d63bfe8e~mv2.png" alt="Threads" /></button><button class="iconBtn" id="exportBtn" aria-label="Export Image"><img src="https://static.wixstatic.com/media/ba9378_19383ab5b1ff4165915f6b0c4a358d8d~mv2.png" alt="åŒ¯å‡ºåœ–ç‰‡" /></button></div></div></div><div class="center" style="margin-top:8px">
      <button class="btn secondary big" id="retryBtn">é‡æ–°ä½œç­”</button>
    </div>

    <div class="center" style="margin-top:18px">
      <div class="promo">
        <strong>æˆ‘å€‘æ˜¯ æ—…è¡Œå„ªå…ˆ TRAVEL FIRST â€”â€” å¸¶è‘—å°æ—…ä¼´ï¼Œä¸€èµ·æ—…è¡Œï¼</strong>
        <a class="btn" id="ytBtn" href="https://www.youtube.com/c/TRAVELFIRST" target="_blank" rel="noopener">é¦¬ä¸Šè§€çœ‹æ—…è¡Œå„ªå…ˆé »é“</a>
      </div>
    </div>
  </div>

  <footer>Â© æ—…è¡Œå„ªå…ˆTRAVEL FIRST</footer>
</div>

<!-- Embedded questions/logic -->
<script>
/* Travel First â€” questions & scoring v3 (drop-in)
 * How to use:
 * 1) Include this file after your original scripts, OR copy its blocks to replace old ones.
 * 2) It assumes globals: `picks` (Array<number|null>), `showResult(roleKey, roleName, mbti)`.
 * 3) Everything else in your page (UI, events) remains unchanged.
 */

/* ---------- 1) é¡Œåº«ï¼ˆ12 é¡Œï¼‰ ---------- */
const questions = [
  { title: 'Q1ï½œä½ å’Œæœ‹å‹å€‘è¨ˆç•«ä¾†ä¸€è¶Ÿæ—…è¡Œï¼Œç¾¤çµ„ä¸­å¦‚ç«å¦‚è¼åœ°è¨è«–è¡Œç¨‹ã€‚',
    body: 'æœ‰äººæƒ³å»æº«æ³‰ã€æœ‰äººæƒ³å»éŠæ¨‚åœ’ï¼Œé‚„æœ‰äººé»˜é»˜æ‰“é–‹ Google Maps æ‰¾ã€Œå¤–æ˜Ÿäººä¸»é¡Œå’–å•¡å»³ã€ï¼Œç”šè‡³æœ‰äººå·²ç¶“è¦æº–å‚™è¨‚ç¥¨äº†ã€‚\\né€™æ™‚çš„ä½ æœƒâ€”â€”',
    opts: [
      'é¦¬ä¸Šæ•´ç†è¨è«–ç´€éŒ„ï¼Œåˆ—å‡ºå¯è¡Œæ–¹æ¡ˆä¸¦å¿«é€Ÿå®šæ¡ˆï¼šã€Œé‚£å°±é€™æ¨£æ’å§ï¼ã€',
      'ç†±çƒˆåŠ å…¥è¨è«–ï¼šã€Œæ¬¸é€™å®¶ç¶²ç¾å’–å•¡å»³è¶…ç¾çš„ï¼ä¸€å®šè¦å»ï¼ã€',
      'éˆæ©Ÿä¸€å‹•ï¼šã€Œæˆ‘æœ‰å€‹é»å­ï¼ä¹¾è„†è®“ ChatGPT å¹«æˆ‘å€‘æ±ºå®šè¡Œç¨‹å¥½äº†ï¼ã€',
      'æ”¤æ‰‹èªªï¼šã€Œä½ å€‘æ±ºå®šï¼Œæˆ‘éƒ½å¯ä»¥ï½ã€',
      'æ‰“åœ“å ´ï¼šã€Œå¥½å•¦å¥½å•¦ï½åˆ¥åµï¼Œæˆ‘å¹«å¤§å®¶å½™æ•´ä¸€ä¸‹æ„è¦‹å†èªªã€‚ã€'
    ]},
  { title: 'Q2ï½œç¶“éæ¼«é•·çš„è¡Œç¨‹è¨è«–ã€è¨ˆç•«å¾Œï¼Œä½ å€‘çµ‚æ–¼è¦å‡ºç™¼äº†ã€‚',
    body: 'åŸä»¥ç‚ºä¸€åˆ‡éƒ½èƒ½é †åˆ©ï¼Œçµæœå‡ºç™¼ç•¶å¤©æ—©ä¸Šâ€”â€”\\né¬§é˜æ²’éŸ¿ã€è¨ˆç¨‹è»Šè‡¨æ™‚å–æ¶ˆã€è¡Œæç®±é–æ­»æ‰“ä¸é–‹ï¼Œ\\næ—…ä¼´é‚„å¤§å–Šï¼šã€Œå®Œè›‹ï¼æˆ‘è­·ç…§æ”¾åœ¨å†·å‡åº«è£¡ï¼ã€\\næ•´å€‹æ—©ä¸Šç¬é–“äº‚æˆä¸€åœ˜ã€‚\\nä½ æœƒâ€”â€”',
    opts: [
      'å¾ˆå¸¥æ°£åœ°èªªï¼šã€Œæˆ‘å°±çŸ¥é“æœƒæœ‰é€™äº›ç‹€æ³ï¼Œæˆ‘å·²ç¶“æƒ³å¥½è§£æ±ºæ–¹æ¡ˆäº†ã€‚ã€',
      'æ‹¿èµ·æ‰‹æ©Ÿæ‹é™å‹•ï¼šã€Œæ—…ç¨‹ Day 0 â€”â€” å·²ç¶“å´©æ½°ğŸ¤£ã€',
      'ä¸€é‚Šéæ¯›å·¾ã€ä¸€é‚Šå®‰æ’«å¤§å®¶ï¼šã€Œåˆ¥æ…Œå•¦ï½æˆ‘å€‘ä¸€å€‹ä¸€å€‹ä¾†ï¼ã€',
      'æ‹¿èµ·æ—©é¤é‚Šåƒé‚Šèªªï¼šã€Œåæ­£è¨»å®šè¶•ä¸ä¸Šï¼Œä¸å¦‚å…ˆåƒé£½ã€‚ã€',
      'ã€Œé€™å°±æ˜¯å‘½é‹çš„å®‰æ’ï¼èªªä¸å®šæ”¹æ­ä¸‹ä¸€ç­æœƒæ›´ç²¾å½©ï¼ã€'
    ]},
  { title: 'Q3ï½œå•é¡Œä¸€ä¸€è§£æ±ºï¼Œä½ çµ‚æ–¼è¶•ä¸Šé£›æ©Ÿï¼Œä¹Ÿé †åˆ©èµ·é£›äº†ã€‚',
    body: 'æŠµé”é£¯åº—å¾Œï¼Œä½ èˆˆå¥®åœ°æ‰“é–‹è¡Œæç®±ï¼Œçµæœè£¡é¢ä¸æ˜¯ä½ çš„è¡£æœï¼Œ\\nè€Œæ˜¯ä¸€å †é™Œç”Ÿäººçš„è¡£ç‰©ã€ç³–æœï¼Œé‚„æœ‰ä¸€åŒ…å¯«è‘—ã€Œä¸è¦æ‰“é–‹ã€çš„å°åŒ…è£¹ã€‚\\nä½ æœƒâ€”â€”',
    opts: [
      'å†·éœåœ°èªªï¼šã€Œæˆ‘æ‰“å»æ©Ÿå ´è¡Œæä¸­å¿ƒå•å•çœ‹ã€‚ã€',
      'ç›¯è‘—è¡Œæç®±è‹¥æœ‰æ‰€æ€åœ°èªªï¼šã€Œä¹Ÿè¨±é€™æ˜¯ä¸€å ´å‘½é‹çš„éŒ¯ç½®ï¼Œä¸€æ®µç•°åœ‹çš„æ•…äº‹å°±æ­¤å±•é–‹ã€‚ã€',
      'ä¸€é‚Šå®‰æ’«æ—…ä¼´ã€ä¸€é‚Šèªªï¼šã€Œæ²’äº‹å•¦ï½æˆ‘ç­‰ç­‰æ‹¿å»æ«ƒæª¯è™•ç†ï¼Œå¤§å®¶å…ˆåˆ¥äº‚å‹•å–”ã€‚ã€',
      'ã€Œç®—äº†ï¼Œå…ˆå»åƒé “é£¯å†æƒ³å§ï¼Œè‚šå­é¤“ä¹Ÿæƒ³ä¸å‡ºä¾†ã€‚ã€',
      'ç›®å…‰é–ƒçˆï¼šã€Œâ€¦è¦ä¸è¦æ‰“é–‹ä¾†çœ‹çœ‹ï¼Ÿèªªä¸å®šæ˜¯ä»»å‹™é“å…·ï¼ã€'
    ]},
  { title: 'Q4ï½œå¥½ä¸å®¹æ˜“è™•ç†å®Œæ‹¿éŒ¯è¡Œæçš„å•é¡Œï¼Œä½ å€‘æ±ºå®šåˆ°é™„è¿‘è¡—ä¸Šé€›é€›ï¼Œçµæœä½ ä¸å°å¿ƒå’Œæ—…ä¼´èµ°æ•£äº†ï¼Œæ‰‹æ©Ÿåˆæ²’é›»ã€‚',
    body: 'ä½ åœ¨è¡—ä¸Šäº‚æ™ƒï¼Œçªç„¶æœ‰å€‹é™Œç”Ÿäººèµ°éä¾†ï¼Œç”¨ä½ è½ä¸æ‡‚çš„èªè¨€ï¼Œ\\nå°ä½ èªªäº†ä¸€ä¸²è©±ï¼Œç„¶å¾Œâ€”â€”å¡äº†ä¸€å¼µå°ç´™æ¢åœ¨ä½ æ‰‹ä¸Šã€‚\\nä½ æœƒâ€”â€”',
    opts: [
      'å†·éœåœ°èªªï¼šã€Œä¸å¥½æ„æ€ï¼Œæˆ‘è½ä¸æ‡‚ã€‚ã€ç„¶å¾Œç¦®è²Œåœ°é€€é–‹ã€‚',
      'æ¥éç´™æ¢å¾Œå‚»ç¬‘ï¼šã€Œå•Šï½è©²ä¸æœƒæ˜¯ä»€éº¼è¡—é ­æ´»å‹•å§ï¼Ÿæˆ‘æ€éº¼é‚£éº¼å®¹æ˜“è¢«æ­è©±ï½ã€',
      'æƒ³èªªï¼šã€Œå•Šâ€¦ä»–æ˜¯ä¸æ˜¯ä¹Ÿéœ€è¦å¹«å¿™ï¼Ÿã€ä¸¦è©¦è‘—ç†è§£å°æ–¹è¦å¹¹å˜›ã€‚',
      'å‘†ç«™ä¸‰ç§’ï¼šã€Œè›¤ï¼Ÿã€ç„¶å¾Œè£å‚»é€ƒè„«ã€‚',
      'ç›®å…‰ä¸€äº®ï¼šã€Œæœ‰é»å¯ç–‘ï¼Œä½†å¥½åƒä¹ŸæŒºæœ‰è¶£çš„â€”â€”æˆ‘å…ˆè§€å¯Ÿçœ‹çœ‹ä»–è¦å¹¹å˜›å¥½äº†ã€‚ã€'
    ]},
  { title: 'Q5ï½œä½ å¥½ä¸å®¹æ˜“å’Œæ—…ä¼´æœƒåˆäº†ï¼Œä½ å€‘ä¸€èµ·æ­è»Šå‰å¾€ä¸‹å€‹è¡Œç¨‹ã€‚',
    body: 'å¤©ç©ºçªç„¶å‚¾ç›†å¤§é›¨ï¼Œè»Šé™£å‹•ä¹Ÿä¸å‹•ã€‚\\nä¸€è»Šäººé¢é¢ç›¸è¦·ï¼Œç©ºæ°£è£¡é–‹å§‹ç€°æ¼«è‘—ã€Œåˆ°åº•ç‚ºä»€éº¼è¦å‡ºé–€ã€çš„æ°£å‘³ã€‚\\né€™æ™‚ä½ æœƒâ€”â€”',
    opts: [
      'æ‹¿å‡ºè¡Œç¨‹è¡¨å†·éœåˆ†æï¼šã€Œæˆ‘å€‘å…ˆèª¿æ•´ä¸€ä¸‹è·¯ç·šï¼Œé›¨åœå‰å…ˆæ‰¾åœ°æ–¹ä¼‘æ¯ã€‚ã€',
      'çœ‹è‘—çª—å¤–é›¨æ»´èªªï¼šã€Œå…¶å¯¦â€¦ä¸‹é›¨çš„åŸå¸‚ä¹ŸæŒºæµªæ¼«çš„å˜›ã€‚ã€',
      'æ‹¿å‡ºé›¶é£Ÿåˆ†çµ¦å¤§å®¶ï¼šã€Œæ²’äº‹å•¦ï½å¡è»Šå°±ç•¶é‡é¤å§ã€‚ã€',
      'ä¼¸æ‡¶è…°èªªï¼šã€Œåæ­£ä¹Ÿå‹•ä¸äº†ï¼Œä¸å¦‚å…ˆç¡ä¸€è¦ºå§ï½ä¸è¶•è¡Œç¨‹ä¹Ÿä¸éŒ¯ã€‚ã€',
      'æ‰“é–‹è»Šé–€ç¬‘è‘—èªªï¼šã€Œå¤ªæ£’äº†ï¼å°±è®“æˆ‘å€‘éš¨ä¾¿åœ¨å“ªè£¡ä¸‹è»Šå†’éšªå§ï¼ã€'
    ]},
  { title: 'Q6ï½œä½ å€‘æƒ³æ‰¾ä¸€å®¶é¤å»³åä¸‹åƒé “é£¯ã€é †ä¾¿èº²é›¨ã€‚é¢å°ç³ç‘¯æ»¿ç›®çš„é¤å»³ï¼Œä½ æœ€åœ¨æ„çš„æ˜¯â€”â€”',
    body: '',
    opts: [
      'ç•¶åœ°ç‰¹è‰²èˆ‡æ‹ç…§æ°›åœã€‚',
      'é£Ÿç‰©é©åˆå¤§å®¶èƒƒå£ã€æœ‰æ²’æœ‰åƒé£½ã€‚',
      'æ‰¾è©•åƒ¹æœ€é«˜ã€è¡Œç¨‹å‹•ç·šæœ€é †çš„åº—ã€‚',
      'æƒ³åƒä»€éº¼å°±åƒä»€éº¼ï¼Œéš¨ä¾¿éƒ½å¥½ã€‚',
      'å“ªé–“æœ€æœ‰å†’éšªæ„Ÿâ€”â€”è·¯é‚Šå°åƒæ”¤ä¹Ÿå¯ä»¥ï¼'
    ]},
  { title: 'Q7ï½œä½ å€‘é¸äº†ä¸€å®¶çœ‹èµ·ä¾†æ°£æ°›å¾ˆä¸éŒ¯çš„é¤å»³ã€‚',
    body: 'æƒ³èªªç”¨ç•¶åœ°èªè¨€æœ‰èª æ„ï¼Œå°±è¦ªå£è¬›å‡ºå‰›åœ¨ç¿»è­¯AppæŸ¥çš„é‚£å¥è©±ã€‚\\nçµæœåº—å“¡ä¸€æ„£ï¼Œæ•´é–“åº—çªç„¶å®‰éœä¸‹ä¾†â€”â€”\\nä½ æ‰ç™¼ç¾ï¼Œå‰›å‰›é‚£å¥è©±çš„æ„æ€å¥½åƒæ˜¯ã€Œä½ å¥¶å¥¶çœŸç¾å‘³ã€ã€‚\\nä½ æœƒâ€”â€”',
    opts: [
      'é¦¬ä¸Šå†·éœé“æ­‰ä¸¦è©¦åœ–é‡æ–°é»é¤',
      'æ…Œå¼µåœ°æ¯”æ‰‹ç•«è…³ï¼šã€Œå“ˆå“ˆâ€¦æˆ‘åªæ˜¯æƒ³èªªé€™é“èœå¾ˆå¥½åƒå•¦ï½ï¼ã€',
      'é¦¬ä¸Šé èº¬æ‰“åœ“å ´ï¼šã€Œå°ä¸èµ·å°ä¸èµ·ï¼ã€é‚„é †æ‰‹å¹«åº—å“¡æ“¦æ¡Œå­æƒ³æŒ½å›æ°£æ°›ã€‚',
      'æŠŠæ¯”è¼ƒæœƒè™•ç†çš„æ—…ä¼´æ¨çµ¦åº—å“¡ï¼Œç„¶å¾Œæ…¢æ…¢å¾€å»æ‰€æ–¹å‘èµ°ï¼Œå‡è£è¦æ´—æ‰‹é¿é–‹ç¾å ´ã€‚',
      'ä¸€é‚Šé“æ­‰ä¸€é‚Šç¬‘ï¼šã€Œæ²’é—œä¿‚å•¦ï½é€™ä¸‹æœ‰æ•…äº‹å¯ä»¥å›å»è¬›äº†ã€‚ã€'
    ]},
  { title: 'Q8ï½œåƒé£½å–è¶³å¾Œï¼Œä½ å’Œæ—…ä¼´èµ°é€²ä¸€å®¶è—¥å¦åº—ã€‚',
    body: 'çµæœæ—…ä¼´åœ¨è£¡é¢é€›äº†ä¸‰å€‹åŠå°æ™‚ï¼Œ\\nå¾ä¿é¤Šå“è©¦åˆ°å½©å¦ã€å†å¾è—¥å“é€›å›ä¿é¤Šå“â€”â€”\\nä½ æçš„ç±ƒå­éƒ½å¿«é•·ç°å¡µäº†ã€‚\\nä½ æœƒâ€”â€”',
    opts: [
      'å†·éœåœ°èªªï¼šã€Œå·²ç¶“å¾ˆæ™šäº†ï¼Œæˆ‘æ€•ç­‰ç­‰æ²’è»Šå›é£¯åº—ï¼Œéº»ç…©å¿«ä¸€é»ã€‚ã€',
      'æ‹¿èµ·æ‰‹æ©Ÿæ‹é™å‹•å·è‡­æ—…ä¼´ï¼šã€Œç¬¬ä¸‰åœˆé–‹å§‹ï½å¥¹æ˜¯ä¸æ˜¯æ‰“ç®—é€›åˆ°å¤©äº®ï¼Ÿã€',
      'é»˜é»˜å¹«å¿™æè³¼ç‰©ç±ƒï¼šã€Œæ²’é—œä¿‚å•¦ï½å¥¹é€›å¾—é–‹å¿ƒå°±å¥½ã€‚ã€',
      'æ‚„æ‚„é›¢é–‹è—¥å¦åº—ï¼Œåˆ°é™„è¿‘çš„å•†åº—æ™ƒæ™ƒé€›è‡ªå·±çš„ã€‚',
      'é–‹å§‹ç ”ç©¶æ¶ä¸Šçš„å¥‡æ€ªå•†å“ï¼šã€Œæ¬¸é€™åŒ…è£å¤ªå¯æ„›äº†å§ï¼æˆ‘ä¹Ÿè¦è²·ä¸€å€‹ï¼ã€'
    ]},
  { title: 'Q9ï½œçµ‚æ–¼å›åˆ°ä½å®¿ï¼Œå¤§å®¶éƒ½ç´¯å£äº†ã€‚çµæœæˆ¿é–“æ¯”æƒ³åƒä¸­å°ï¼Œæ’åº§åªæœ‰å…©å€‹ï¼Œ',
    body: 'ä¸€å€‹æ—…ä¼´å…ˆæ¶å»æ´—æ¾¡ï¼Œå¦ä¸€å€‹å·²ç¶“é–‹å§‹æ‰“å‘¼ã€‚\\nä½ æœƒâ€”â€”',
    opts: [
      'ååœ¨è§’è½æ‹¿å‡ºæ‰‹æ©Ÿï¼Œè¶é€™æ®µæ™‚é–“ç¢ºèªæ˜å¤©çš„è·¯ç·šèˆ‡è¡Œç¨‹ã€‚',
      'æ‹¿è‘—ç›¸æ©Ÿè¶´åœ¨çª—é‚Šï¼Œæ‹ä¸‹ç•°åœ‹åŸå¸‚çš„å¤œæ™¯ï¼Œé †ä¾¿æ•´ç†ä»Šå¤©çš„ç…§ç‰‡ã€‚',
      'å¹«å¤§å®¶æŠŠè¡Œææ•´ç†å‡ºèµ°é“ã€å¹«å¿™æ”¶è¡£æœï¼šã€Œå¤§å®¶å…ˆä¼‘æ¯ï¼Œæˆ‘ä¾†è™•ç†å°±å¥½ï½ã€',
      'ç›´æ¥æ’²ä¸ŠåºŠã€ç§’ç¡ã€‚',
      'è¦ºå¾—æ„çŒ¶æœªç›¡ï¼Œæ‰“ç®—ç­‰ç­‰å†å‡ºé–€æ™ƒæ™ƒï¼Œé«”é©—é€™åº§åŸå¸‚çš„å¤œç”Ÿæ´»ã€‚'
    ]},
  { title: 'Q10ï½œæ·±å¤œï¼Œå¤§å®¶éƒ½ç¡äº†ã€‚',
    body: 'ä½ è¢«å¥‡æ€ªçš„è²éŸ³åµé†’ï¼Œåƒæ˜¯æœ‰äººåœ¨æ•²é–€ï¼Œåˆåƒæ˜¯åœ¨èµ°å»Šæ‹–è¡Œæã€‚\\nä½ åèµ·èº«ï¼Œç™¼ç¾é‚£è²éŸ³è¶Šä¾†è¶Šè¿‘ï¼Œä½ æœƒâ€”â€”',
    opts: [
      'æ·±å‘¼å¸å†·éœåˆ†æï¼šã€Œæ‡‰è©²åªæ˜¯å…¶ä»–æ—…å®¢å›æˆ¿å§ã€‚ã€ç„¶å¾Œèººå›å»ã€‚',
      'æ‹¿èµ·æ‰‹æ©Ÿå°è²èªªï¼šã€Œå¤ªæ€ªäº†å§â€¦æˆ‘ä¸€å®šè¦æ‹ä¸‹ä¾†ï¼ã€é‚Šæ‹é‚Šå¾€æ£‰è¢«è£¡ç¸®ã€‚',
      'èµ·èº«èµ°å»é–€å£æŸ¥çœ‹ï¼šã€Œå¤§å®¶éƒ½é‚„å¥½å—ï¼Ÿè¦ä¸è¦æˆ‘å»æ«ƒæª¯å•å•ï¼Ÿã€',
      'æŠŠæ£‰è¢«è“‹åˆ°é ­é ‚ç¹¼çºŒå€’é ­ç¡ï¼šã€Œç®—äº†â€¦ç¡è‘—å°±æ²’äº‹äº†â€¦æ‡‰è©²å§ã€‚ã€',
      'éœ²å‡ºèˆˆå¥®çš„è¡¨æƒ…ï¼šã€Œå¤ªåˆºæ¿€äº†å§ï¼é€™è£¡è©²ä¸æœƒæ˜¯å‚³èªªä¸­çš„éˆç•°é£¯åº—ï¼Ÿã€'
    ]},
  { title: 'Q11ï½œå¹¾å¤©çš„æ—…ç¨‹å³å°‡æ¥è¿‘å°¾è²ã€‚çµæœæ—…ä¼´çªç„¶å°ä½ èªªâ€”â€”',
    body: 'ã€Œæˆ‘å‰›å‰›ä»”ç´°å°äº†ç™¼ç¥¨ï¼Œé‚£å¤©åœ¨å’–å•¡å»³ä½ å¤šå–äº†åŠå£å¥¶èŒ¶ï¼Œ\\né‚„æœ‰å‰›å‰›åœ¨è»Šä¸Šä½ åƒæˆ‘ä¸€æ ¹è–¯æ¢ï¼Œé€™æ¨£ç®—èµ·ä¾†å¤§æ¦‚è¦å†è£œæˆ‘43å…ƒã€‚ã€\\nä½ æœƒâ€”â€”',
    opts: [
      'æ‰“é–‹ä½ æ‰‹æ©Ÿä¸­é€™å¹¾å¤©è¨ˆçš„å¸³èªªï¼šã€Œå¥½ï¼Œé‚£æˆ‘ä¹Ÿé‡æ–°æ ¸å°ä¸€ä¸‹æ¯ä¸€ç­†èŠ±è²»ã€‚ã€',
      'æ’’å¬Œåœ°èªªï¼šã€Œå¼å”·ï½ä½ å°±ç•¶ä½œæ˜¯è«‹æˆ‘çš„å•¦ï½ã€',
      'ä¸€é‚Šè‹¦ç¬‘ä¸€é‚Šæƒ³ï¼šã€Œâ€¦â€¦å¥½å•¦ï¼Œæˆ‘å°±ç•¶é€™43å…ƒæ˜¯å‹æƒ…ç¨…ã€‚ã€',
      'è£å‚»ï¼Œé¡§å·¦å³è€Œè¨€ä»–ã€‚',
      'æ‰“å“ˆå“ˆåœ°èªªï¼šã€Œå¥½å•¦ï½æˆ‘ä¸‹æ¬¡è«‹ä½ ä¸€æ¯çå¥¶ï¼Œé€™æ¨£æ‰¯å¹³äº†å§ï½ã€'
    ]},
  { title: 'Q12ï½œçµæŸæ—…ç¨‹ï¼Œä½ æ‹–è‘—è¡Œæå›åˆ°ç†Ÿæ‚‰çš„å®¶ã€‚æ”¾ä¸‹åŒ…åŒ…çš„é‚£ä¸€åˆ»ï¼Œä½ é€šå¸¸æœƒï¼Ÿ',
    body: '',
    opts: [
      'æŠŠä¼´æ‰‹ç¦®ä¸€ä»½ä»½åŒ…å¥½åˆ†çµ¦æœ‹å‹',
      'è¡Œæå…ˆæ”¾è‘—ï¼Œç­‰æ˜å¤©å†èªª',
      'é‚Šæ‹†ç´€å¿µå“é‚Šå›å‘³æ—…ç¨‹ï¼šã€Œå¥½æƒ³å†å»ä¸€æ¬¡ï¼ã€',
      'ç«‹åˆ»æŠŠè¡Œææ•´ç†ä¹¾æ·¨ã€åˆ†é¡å¥½',
      'æ„çŒ¶æœªç›¡ï¼Œé¦¬ä¸Šé–‹å§‹æŸ¥ä¸‹ä¸€æ¬¡è¦å»å“ª'
    ]},
];

/* ---------- 2) è§’è‰²å°æ‡‰è¡¨ï¼ˆA~E å°æ‡‰ 0..4 ç´¢å¼•ï¼‰ ---------- */
const mapping = [
  ['å¸•æ–¯','å¡ç¾æ‹‰','æ—…å…ˆæ£®','çš®ç¾…','å¡é‚¦'],  // Q1
  ['å¸•æ–¯','å¡ç¾æ‹‰','å¡é‚¦','çš®ç¾…','æ—…å…ˆæ£®'],  // Q2
  ['å¸•æ–¯','å¡ç¾æ‹‰','å¡é‚¦','çš®ç¾…','æ—…å…ˆæ£®'],  // Q3
  ['å¸•æ–¯','å¡ç¾æ‹‰','å¡é‚¦','çš®ç¾…','æ—…å…ˆæ£®'],  // Q4
  ['å¸•æ–¯','å¡ç¾æ‹‰','å¡é‚¦','çš®ç¾…','æ—…å…ˆæ£®'],  // Q5
  ['å¡ç¾æ‹‰','å¡é‚¦','å¸•æ–¯','çš®ç¾…','æ—…å…ˆæ£®'],  // Q6
  ['å¸•æ–¯','å¡ç¾æ‹‰','å¡é‚¦','çš®ç¾…','æ—…å…ˆæ£®'],  // Q7
  ['å¸•æ–¯','å¡ç¾æ‹‰','å¡é‚¦','çš®ç¾…','æ—…å…ˆæ£®'],  // Q8
  ['å¸•æ–¯','å¡ç¾æ‹‰','å¡é‚¦','çš®ç¾…','æ—…å…ˆæ£®'],  // Q9
  ['å¸•æ–¯','å¡ç¾æ‹‰','å¡é‚¦','çš®ç¾…','æ—…å…ˆæ£®'],  // Q10
  ['å¸•æ–¯','å¡ç¾æ‹‰','å¡é‚¦','çš®ç¾…','æ—…å…ˆæ£®'],  // Q11
  ['å¡é‚¦','çš®ç¾…','å¡ç¾æ‹‰','å¸•æ–¯','æ—…å…ˆæ£®']   // Q12
];

/* ---------- 3) MBTI è»¸å‘åŠ æ¬Šï¼ˆAXIS_KEYï¼‰ ---------- */
const AXIS_KEY = {
  Q1: [ {E:1,I:0,N:1,S:0,T:1,F:0,J:1,P:0}, {E:1,I:0,N:1,S:0,T:0,F:1,J:0,P:1}, {E:1,I:0,N:1,S:0,T:0,F:1,J:0,P:1}, {E:0,I:1,N:0,S:1,T:0,F:1,J:0,P:1}, {E:1,I:0,N:1,S:0,T:0,F:1,J:0,P:1} ],
  Q2: [ {E:1,I:0,N:0,S:1,T:1,F:0,J:1,P:0}, {E:1,I:0,N:1,S:0,T:0,F:0,J:0,P:1}, {E:1,I:0,N:0,S:0,T:0,F:1,J:0,P:1}, {E:0,I:1,N:0,S:1,T:0,F:1,J:0,P:1}, {E:1,I:0,N:0,S:0,T:0,F:1,J:1,P:0} ],
  Q3: [ {E:0,I:1,N:0,S:1,T:1,F:0,J:1,P:0}, {E:0,I:1,N:1,S:0,T:0,F:1,J:0,P:1}, {E:0,I:1,N:0,S:1,T:0,F:1,J:0,P:1}, {E:0,I:1,N:0,S:1,T:0,F:1,J:0,P:1}, {E:1,I:0,N:1,S:0,T:0,F:0,J:0,P:1} ],
  Q4: [ {E:0,I:1,N:0,S:0,T:1,F:0,J:1,P:0}, {E:1,I:0,N:1,S:0,T:0,F:1,J:0,P:1}, {E:1,I:0,N:0,S:1,T:0,F:1,J:0,P:1}, {E:0,I:1,N:0,S:1,T:0,F:0,J:0,P:1}, {E:1,I:0,N:1,S:0,T:0,F:0,J:0,P:1} ],
  Q5: [ {E:0,I:1,N:0,S:0,T:1,F:0,J:1,P:0}, {E:1,I:0,N:1,S:0,T:0,F:1,J:0,P:1}, {E:1,I:0,N:0,S:1,T:0,F:1,J:1,P:0}, {E:0,I:1,N:1,S:0,T:0,F:1,J:0,P:1}, {E:1,I:0,N:1,S:0,T:0,F:0,J:0,P:1} ],
  Q6: [ {E:1,I:0,N:0,S:1,T:0,F:1,J:0,P:1}, {E:1,I:0,N:0,S:1,T:0,F:1,J:0,P:1}, {E:0,I:1,N:0,S:1,T:1,F:0,J:1,P:0}, {E:0,I:1,N:0,S:1,T:0,F:0,J:0,P:1}, {E:1,I:0,N:1,S:0,T:0,F:0,J:0,P:1} ],
  Q7: [ {E:0,I:1,N:0,S:1,T:1,F:0,J:1,P:0}, {E:1,I:0,N:0,S:1,T:0,F:1,J:0,P:1}, {E:1,I:0,N:0,S:1,T:0,F:1,J:1,P:0}, {E:0,I:1,N:0,S:1,T:0,F:0,J:0,P:1}, {E:1,I:0,N:1,S:0,T:0,F:0,J:0,P:1} ],
  Q8: [ {E:0,I:1,N:0,S:1,T:1,F:0,J:1,P:0}, {E:1,I:0,N:1,S:0,T:0,F:0,J:0,P:1}, {E:0,I:1,N:0,S:1,T:1,F:0,J:1,P:0}, {E:0,I:1,N:0,S:1,T:0,F:0,J:0,P:1}, {E:1,I:0,N:0,S:1,T:0,F:0,J:0,P:1} ],
  Q9: [ {E:0,I:1,N:0,S:1,T:1,F:0,J:1,P:0}, {E:1,I:0,N:1,S:0,T:0,F:1,J:0,P:1}, {E:1,I:0,N:0,S:1,T:0,F:1,J:1,P:0}, {E:1,I:0,N:1,S:0,T:0,F:1,J:0,P:1}, {E:0,I:1,N:0,S:1,T:0,F:0,J:0,P:1} ],
  Q10:[ {E:0,I:1,N:0,S:0,T:1,F:0,J:1,P:0}, {E:1,I:0,N:1,S:0,T:0,F:0,J:0,P:1}, {E:1,I:0,N:0,S:1,T:0,F:1,J:0,P:1}, {E:0,I:1,N:0,S:1,T:0,F:0,J:0,P:1}, {E:1,I:0,N:1,S:0,T:0,F:0,J:0,P:1} ],
  Q11:[ {E:0,I:1,N:0,S:1,T:1,F:0,J:1,P:0}, {E:1,I:0,N:0,S:0,T:0,F:1,J:0,P:1}, {E:0,I:1,N:0,S:1,T:0,F:1,J:1,P:0}, {E:0,I:1,N:0,S:0,T:0,F:0,J:0,P:1}, {E:1,I:0,N:0,S:0,T:0,F:1,J:0,P:1} ],
  Q12:[ {E:0,I:1,N:0,S:1,T:0,F:1,J:1,P:0}, {E:0,I:1,N:0,S:1,T:0,F:0,J:0,P:1}, {E:1,I:0,N:1,S:0,T:0,F:1,J:0,P:1}, {E:0,I:1,N:0,S:1,T:1,F:0,J:1,P:0}, {E:1,I:0,N:1,S:0,T:0,F:0,J:0,P:1} ],
};

/* ---------- 4) è§’è‰²å…è¨±çš„ MBTI å­å‹ ---------- */
const role2mbti = {
  'æ—…å…ˆæ£®': ['ENFP','ENTP','ESTP'],
  'å¸•æ–¯':   ['INTJ','ENTJ','ISTJ','ESTJ'],
  'å¡é‚¦':   ['ISFJ','ESFJ','INTP','ISTP'],
  'å¡ç¾æ‹‰': ['ENFJ','ESFP','INFJ'],
  'çš®ç¾…':   ['ISFP','INFP'],
};

/* ---------- Backward-compat placeholder (è‹¥èˆŠç¢¼æ›¾å¼•ç”¨ weights åç¨±) ---------- */
const weights = {"æ—…å…ˆæ£®":{E:0,N:0,F:0,P:0},"å¸•æ–¯":{I:0,S:0,T:0,J:0},"å¡ç¾æ‹‰":{E:0,N:0,F:0,P:0},"å¡é‚¦":{I:0,S:0,T:0,J:0},"çš®ç¾…":{I:0,S:0,F:0,P:0}};

/* ---------- å°å·¥å…·ï¼šæµ·æ˜è·é›¢ ---------- */
function hamming(a,b){let d=0;for(let i=0;i<4;i++) if(a[i]!==b[i]) d++; return d;}

/* ---------- 5) è¨ˆåˆ†ä¸»ç¨‹å¼ ---------- */
function computeAndShow(){
  const roleScore={æ—…å…ˆæ£®:0,å¸•æ–¯:0,å¡ç¾æ‹‰:0,å¡é‚¦:0,çš®ç¾…:0};
  const axis={E:0,I:0,N:0,S:0,T:0,F:0,J:0,P:0};

  for(let i=0;i<questions.length;i++){
    const opt=picks[i]; if(opt==null) continue;
    const role=mapping[i][opt]; if(!role) continue;
    roleScore[role]++;
    const votes=AXIS_KEY['Q'+(i+1)][opt];
    if(votes){ for(const k in votes){ axis[k]+=votes[k]; } }
  }

  // è§’è‰²å‹å‡ºï¼šå…ˆçœ‹ç¸½ç¥¨ï¼›è‹¥å¹³æ‰‹ï¼Œç”¨ Q7~Q12 åŠ æ¬Šï¼›å†å¹³æ‰‹ç”¨å›ºå®šåº
  const entries=Object.entries(roleScore).sort((a,b)=>b[1]-a[1]);
  const top=entries[0][1];
  let tied=entries.filter(e=>e[1]===top).map(e=>e[0]);
  let winner=tied[0];

  if(tied.length>1){
    const late={'æ—…å…ˆæ£®':0,'å¸•æ–¯':0,'å¡é‚¦':0,'å¡ç¾æ‹‰':0,'çš®ç¾…':0};
    for(let qi=6; qi<12; qi++){  // Q7~Q12 => index 6..11
      const r=mapping[qi][picks[qi]];
      if(r) late[r]++;
    }
    const lateTop=Math.max(...tied.map(r=>late[r]));
    let lateTied=tied.filter(r=>late[r]===lateTop);
    if(lateTied.length>1){
      const tieOrder=['å¸•æ–¯','å¡ç¾æ‹‰','å¡é‚¦','æ—…å…ˆæ£®','çš®ç¾…'];
      lateTied.sort((a,b)=>tieOrder.indexOf(a)-tieOrder.indexOf(b));
    }
    winner=lateTied[0];
  }

  // MBTI è»¸ï¼šE/Iã€N/Sã€T/Fã€J/P
  const mbtiRaw=(axis.E>=axis.I?'E':'I')+(axis.N>=axis.S?'N':'S')+(axis.T>=axis.F?'T':'F')+(axis.J>=axis.P?'J':'P');
  const allow=role2mbti[winner]||['ENFP','INTJ','ISFJ','ENFJ','ISFP'];
  const mbti=allow.includes(mbtiRaw)?mbtiRaw:allow.slice().sort((x,y)=>hamming(x,mbtiRaw)-hamming(y,mbtiRaw))[0];

  // é é¢ç¾æœ‰å‡½å¼
  showResult(winner,winner,mbti);
}

</script>

<script>
// ===== UI Runtime (final stable: shuffle once + manual next + safe overlay) =====
(function(){
  // Safety: always try to hide overlay in case of partial errors
  function hideOverlay(){ try{ var el=document.getElementById('overlay'); if(el) el.classList.add('hide'); }catch(e){} }
  // Hide on DOM ready and as a last resort after 5s
  if(document.readyState==='loading'){
    document.addEventListener('DOMContentLoaded', function(){ setTimeout(hideOverlay, 400); });
  }else{
    setTimeout(hideOverlay, 400);
  }
  setTimeout(hideOverlay, 5000);

  function boot(){
    const qData = (typeof questions!=='undefined') ? questions : [];
    const quiz=document.getElementById("quiz");
    const intro=document.getElementById("intro");
    const qWrap=document.getElementById("questionContainer");
    const bar=document.getElementById("bar");
    const btnPrev=document.getElementById("prevBtn");
    const btnNext=document.getElementById("nextBtn");
    const navRow=document.getElementById("navRow");
    const loading=document.getElementById("loading");
    const result=document.getElementById("result");
    const startBtn=document.getElementById("startBtn");

    // Guard: if critical elements missing, abort gracefully
    if(!quiz || !intro || !qWrap || !bar || !btnPrev || !navRow || !loading || !result || !startBtn){
      console.error("[TF] Missing critical DOM elements, aborting UI init.");
      hideOverlay();
      return;
    }
    if(!Array.isArray(qData) || qData.length===0){
      console.error("[TF] questions array is empty or undefined. UI cannot render questions.");
      hideOverlay();
      return;
    }

    let idx=0;
    window.picks = Array(qData.length).fill(null);
    // initialize per-question shuffle once
    if(!window.shuffleMap){
      function makeShuffle(n){
        const a = Array.from({length:n}, (_, i) => i);
        for(let i=a.length-1; i>0; i--){
          const j = Math.floor(Math.random() * (i+1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }
      window.shuffleMap = qData.map(q => makeShuffle((q.opts||[]).length));
    }

,(_,i)=>i); for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
      window.shuffleMap = qData.map(q => makeShuffle((q.opts||[]).length));
    }


    function clean(s){
  if(!s) return '';
  return (''+s)
    .replace(/\n/g, '')  // remove literal backslash-n
    .replace(/
/g, '')    // remove real newlines
    .replace(/
/g, '')    // remove carriage returns
    .trim();
}

    function makeShuffle(n){
      const arr=Array.from({length:n},(_,i)=>i);
      for(let i=arr.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
      }
      return arr;
    }
    const shuffleMap = qData.map(q=>makeShuffle(q.opts.length));

    function firstUnanswered(){ for(let i=0;i<qData.length;i++) if(picks[i]==null) return i; return -1; }

    

    function goLoadingThenResult(){
      const miss=firstUnanswered();
      if(miss!==-1){ alert("é‚„æœ‰é¡Œç›®å°šæœªä½œç­”ï¼Œå°‡å¸¶ä½ å›åˆ°æœªå®Œæˆçš„é¡Œç›®ã€‚"); idx=miss; renderQuestion(); return; }
      quiz.style.display='none';
      loading.style.display='block';
      setTimeout(()=>{
        try{ computeAndShow(); loading.style.display='none'; }
        catch(err){ console.error(err); loading.style.display='none'; alert("çµæœè¨ˆç®—å‡ºäº†å°å•é¡Œï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚"); location.reload(); }
      },4000);
    }

    // Bind events
    startBtn.addEventListener('click', function(){
      intro.style.display='none';
      quiz.style.display='block';
      idx=0;
      renderQuestion();
    });
    btnPrev.addEventListener('click', function(){ if(idx>0){ idx--; renderQuestion(); } });
    if(btnNext){
      return; }
        if(idx<qData.length-1){ idx++; renderQuestion(); }
        else{ goLoadingThenResult(); }
      });
    }

    // Finally ensure overlay is gone
    
    // Enforce manual-next with selection check
    if(btnNext){
      btnNext.onclick = function(){
        if(picks[idx]==null){
          alert("è«‹å…ˆé¸æ“‡ä¸€å€‹é¸é …å–”ï¼");
          return;
        }
        if(idx < qData.length - 1){
          idx++;
          renderQuestion();
        }else{
          for(let i=0;i<qData.length;i++){ if(picks[i]==null){ idx=i; renderQuestion(); return; } }
          goLoadingThenResult();
        }
      };
    }
    hideOverlay();
  }

  // Ensure boot runs after DOM is ready
  if(document.readyState==='loading'){
    document.addEventListener('DOMContentLoaded', boot);
  }else{
    boot();
  }
})();
</script>

<script>
// ===== UI Runtime =====
window.addEventListener('load',()=>{ setTimeout(()=>document.getElementById('overlay').classList.add('hide'),350); });

const qData = (typeof questions!=='undefined') ? questions : [];
const quiz=document.getElementById("quiz");
const intro=document.getElementById("intro");
const qWrap=document.getElementById("questionContainer");
const bar=document.getElementById("bar");
const btnPrev=document.getElementById("prevBtn");
const navRow=document.getElementById("navRow");
const loading=document.getElementById("loading");
const result=document.getElementById("result");

let idx=0;
window.picks=Array(qData.length).fill(null);

// Remove literal '\n'
function clean(s){ return (s||'').replace(/\\r?\\n/g,'').replace(/\\n/g,''); }

function firstUnanswered(){for(let i=0;i<qData.length;i++) if(picks[i]==null) return i; return -1;}

function renderQuestion(){
  const q=qData[idx];
  
  // Lazy init shuffleMap once (per-question option order)
  if(!window.shuffleMap){
    function __mk(n){ const a=Array.from({length:n},(_,i)=>i); for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
    window.shuffleMap = qData.map(q => __mk((q.opts||[]).length));
  }
const intros = {
      0: "ä½ å’Œæœ‹å‹å€‘è¨ˆç•«ä¾†ä¸€è¶Ÿæ—…è¡Œï¼Œç¾¤çµ„ä¸­å¦‚ç«å¦‚è¼åœ°è¨è«–è¡Œç¨‹ã€‚",
      1: "ç¶“éæ¼«é•·çš„è¡Œç¨‹è¨è«–ã€è¨ˆç•«å¾Œï¼Œä½ å€‘çµ‚æ–¼è¦å‡ºç™¼äº†ã€‚",
      2: "å•é¡Œä¸€ä¸€è§£æ±ºï¼Œä½ çµ‚æ–¼è¶•ä¸Šé£›æ©Ÿï¼Œä¹Ÿé †åˆ©èµ·é£›äº†ã€‚",
      3: "å¥½ä¸å®¹æ˜“è™•ç†å®Œæ‹¿éŒ¯è¡Œæçš„å•é¡Œï¼Œä½ å€‘æ±ºå®šåˆ°é™„è¿‘è¡—ä¸Šé€›é€›ï¼Œçµæœä½ ä¸å°å¿ƒå’Œæ—…ä¼´èµ°æ•£äº†ï¼Œæ‰‹æ©Ÿåˆæ²’é›»ã€‚",
      4: "ä½ å¥½ä¸å®¹æ˜“å’Œæ—…ä¼´æœƒåˆäº†ï¼Œä½ å€‘ä¸€èµ·æ­è»Šå‰å¾€ä¸‹å€‹è¡Œç¨‹ã€‚",
      6: "ä½ å€‘é¸äº†ä¸€å®¶çœ‹èµ·ä¾†æ°£æ°›å¾ˆä¸éŒ¯çš„é¤å»³ã€‚",
      7: "åƒé£½å–è¶³å¾Œï¼Œä½ å’Œæ—…ä¼´èµ°é€²ä¸€å®¶è—¥å¦åº—ã€‚",
      8: "çµ‚æ–¼å›åˆ°ä½å®¿ï¼Œå¤§å®¶éƒ½ç´¯å£äº†ã€‚çµæœæˆ¿é–“æ¯”æƒ³åƒä¸­å°ï¼Œæ’åº§åªæœ‰å…©å€‹ï¼Œ",
      9: "æ·±å¤œï¼Œå¤§å®¶éƒ½ç¡äº†ã€‚",
      10: "å¹¾å¤©çš„æ—…ç¨‹å³å°‡æ¥è¿‘å°¾è²ã€‚çµæœæ—…ä¼´çªç„¶å°ä½ èªªâ€”â€”"
    };
      (function(){try{
        var qbody = qWrap.querySelector('.qbody');
        var intro = intros[idx];
        if(intro && qbody){ qbody.innerHTML = intro + '<br>' + qbody.innerHTML; }
      }catch(e){}})();
      qWrap.innerHTML=`<div class="qtitle">${clean(q.title)||''}</div>
                   <div class="qbody">${clean(q.body)||''}</div>`
    + ( (window.shuffleMap && window.shuffleMap[idx]) ? window.shuffleMap[idx] : (q.opts||[]).map((_,i)=>i) )
    .map((orig)=>{
      const checked = (picks[idx]===orig)?'checked':'';
      const selected = (picks[idx]===orig)?'selected':'';
      return `<label class="opt ${selected}"><input type="radio" name="q${idx}" value="${orig}" ${checked}> <div class="opt-text">${clean(q.opts[orig])}</div></label>`;
    }).join("")
  ;

  qWrap.querySelectorAll(`input[name="q${idx}"]`).forEach(r=>{
    r.addEventListener("change",e=>{
      picks[idx]=parseInt(e.target.value,10);
      qWrap.querySelectorAll(".opt").forEach(o=>o.classList.remove("selected"));
      e.target.closest(".opt").classList.add("selected");
      },{passive:true});
  });

  bar.style.width=((idx)/qData.length*100)+"%";

  // Q1 hide prev
  navRow.style.display='flex'; if(idx===0){ btnPrev.style.display='none'; } else { btnPrev.style.display='inline-flex'; }

  window.scrollTo({top:quiz.offsetTop-8,behavior:'smooth'});

  // --- Minimal post-formatting: split Qnï½œ and move rest into small text ---
  (function(){
    try{
      var t = qWrap.querySelector('.qtitle');
      var b = qWrap.querySelector('.qbody');
      if(t && b){
        var txt = (t.textContent||'').trim();
        var m = txt.match(/^Q\d+\s*[ï½œ\|:\ï¼š\-\.\s]*/);
        if(m){
          var head = m[0].trim().replace(/[\s\|:\ï¼š\-\.]*$/, ''); if(!head.endsWith('ï½œ')) head += 'ï½œ';
          var tail = txt.slice(m[0].length).trim();
          t.textContent = head;
          if(tail){
            b.classList.add('smalltext');
            b.textContent = (b.textContent ? (b.textContent + ' ') : '') + tail;
            var __intro = intros[idx]; if(__intro){  b.innerHTML = __intro + '<br>' + b.innerHTML;  try{    var pre = __intro + '<br>';    var rest = b.innerHTML.slice(pre.length);    rest = rest.split(__intro).join('');    b.innerHTML = pre + rest;  }catch(_e){} }
          }
        }
      }
    }catch(e){ console.warn('[format]', e); }
  })();

}

function goLoadingThenResult(){
  const miss=firstUnanswered();
  if(miss!==-1){ alert("é‚„æœ‰é¡Œç›®å°šæœªä½œç­”ï¼Œå°‡å¸¶ä½ å›åˆ°æœªå®Œæˆçš„é¡Œç›®ã€‚"); idx=miss; renderQuestion(); return; }
  quiz.style.display='none';
  loading.style.display='block';
  setTimeout(()=>{
    try{ computeAndShow(); loading.style.display='none'; }
    catch(err){ console.error(err); loading.style.display='none'; alert("çµæœè¨ˆç®—å‡ºäº†å°å•é¡Œï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚"); location.reload(); }
  },4000);
}

document.getElementById("startBtn").onclick=()=>{ intro.style.display='none'; quiz.style.display='block'; idx=0; renderQuestion(); };
btnPrev.onclick=()=>{ if(idx>0){ idx--; renderQuestion(); } };

// ===== Result rendering hook =====
const roleImg={"æ—…å…ˆæ£®":"https://static.wixstatic.com/media/ba9378_df2b195732864ba8a5967b104923e670~mv2.png",
"å¡é‚¦":"https://static.wixstatic.com/media/ba9378_8138a1a084284b93a53c2a42cb458c74~mv2.png",
"å¡ç¾æ‹‰":"https://static.wixstatic.com/media/ba9378_afef00400707435886277313ef6dbc4b~mv2.png",
"å¸•æ–¯":"https://static.wixstatic.com/media/ba9378_266468855fb8463b916f590ef861a508~mv2.png",
"çš®ç¾…":"https://static.wixstatic.com/media/ba9378_86ced82974b945ec95be62edaf0328d4~mv2.png"};

// MBTI-specific result images
const resultImages = {
  "æ—…å…ˆæ£®-ESTP": "https://static.wixstatic.com/media/ba9378_50cc2ae2a3d541b79934694166de1e7a~mv2.png",
  "æ—…å…ˆæ£®-ENTP": "https://static.wixstatic.com/media/ba9378_7c251e9b4e7546a2bcc789e78a33781a~mv2.png",
  "æ—…å…ˆæ£®-ENFP": "https://static.wixstatic.com/media/ba9378_591c35006bf64a0cb54a68618504f730~mv2.png",

  "å¸•æ–¯-INTJ": "https://static.wixstatic.com/media/ba9378_cc5a7361964c43ee813203ba2f36afba~mv2.png",
  "å¸•æ–¯-ESTJ": "https://static.wixstatic.com/media/ba9378_06adb547f87448b78ae9fe8d505bdb4f~mv2.png",
  "å¸•æ–¯-ENTJ": "https://static.wixstatic.com/media/ba9378_6928cc1db38849999645834d286e0079~mv2.png",
  "å¸•æ–¯-ISTJ": "https://static.wixstatic.com/media/ba9378_bcca6106f5504086a37839e47a1b9b15~mv2.png",

  "å¡é‚¦-ISTP": "https://static.wixstatic.com/media/ba9378_dea27c689ba24c3780016b3f93d46c25~mv2.png",
  "å¡é‚¦-ISFJ": "https://static.wixstatic.com/media/ba9378_6710fe61e93d4975b8aaebaa223cffd1~mv2.png",
  "å¡é‚¦-INTP": "https://static.wixstatic.com/media/ba9378_8d609f5a3121400fbdedfe4da5b47431~mv2.png",
  "å¡é‚¦-ESFJ": "https://static.wixstatic.com/media/ba9378_72cb26ab0d6942fb92863ff4db4ce566~mv2.png",

  "å¡ç¾æ‹‰-INFJ": "https://static.wixstatic.com/media/ba9378_2d22484cd7334bc4b0a9645f852619c5~mv2.png",
  "å¡ç¾æ‹‰-ESFP": "https://static.wixstatic.com/media/ba9378_4e1ab1302a86413ab87cb4434c73c1a7~mv2.png",
  "å¡ç¾æ‹‰-ENFJ": "https://static.wixstatic.com/media/ba9378_a75f3860d7144eacaf7b62487f0cddac~mv2.png",

  "çš®ç¾…-ISFP": "https://static.wixstatic.com/media/ba9378_5fa76fafd7754c9a85fad5c128f5bde1~mv2.png",
  "çš®ç¾…-INFP": "https://static.wixstatic.com/media/ba9378_5d0a4e8b84724615910db4e3a033770c~mv2.png",
};

const resultMeta={ENFP:{role:"æ—…å…ˆæ£®",name:"éˆé­‚æ¢éšªå®¶",desc:"ç†±è¡€æ„Ÿæ€§ï¼Œæ†‘ç›´è¦ºæ¢ç´¢ä¸–ç•Œã€‚",quote:"ã€Œä¸–ç•Œé€™éº¼å¤§ï¼Œæˆ‘æƒ³å»è½‰ä¸€è½‰ã€‚ã€"},
ENTP:{role:"æ—…å…ˆæ£®",name:"å‰µæ„è¡Œå‹•è€…",desc:"éˆå…‰ä¹ç¾ï¼Œå‰µæ„èˆ‡è¡Œå‹•ä¸¦é‡ã€‚",quote:"ã€Œä¸–ç•Œé€™éº¼å¤§ï¼Œæˆ‘æƒ³å»è½‰ä¸€è½‰ã€‚ã€"},
ESTP:{role:"æ—…å…ˆæ£®",name:"å³èˆˆå†’éšªå®¶",desc:"è¡Œå‹•æ´¾ï¼Œç†±æ„›é€Ÿåº¦èˆ‡åˆºæ¿€ã€‚",quote:"ã€Œä¸–ç•Œé€™éº¼å¤§ï¼Œæˆ‘æƒ³å»è½‰ä¸€è½‰ã€‚ã€"},
INTJ:{role:"å¸•æ–¯",name:"ç­–ç•¥å°æ¼”",desc:"è…¦ä¸­æœ‰è—åœ–ã€æ€è·¯ç¸å¯†ã€‚",quote:"ã€Œæ²’è¨ˆç•«çš„æ—…ç¨‹ä¸å«æ—…è¡Œï¼Œå«æ··äº‚ã€‚ã€"},
ENTJ:{role:"å¸•æ–¯",name:"æ±ºç­–é ˜èˆªå“¡",desc:"é ˜å°æ°£å ´å¼·ï¼Œæ“…é•·æŒæ§å…¨å±€ã€‚",quote:"ã€Œæ²’è¨ˆç•«çš„æ—…ç¨‹ä¸å«æ—…è¡Œï¼Œå«æ··äº‚ã€‚ã€"},
ISTJ:{role:"å¸•æ–¯",name:"è¦åŠƒåŸ·è¡Œè€…",desc:"æœ‰æ¢ç†ã€é‡ç§©åºã€æ•ˆç‡æ§ã€‚",quote:"ã€Œæ²’è¨ˆç•«çš„æ—…ç¨‹ä¸å«æ—…è¡Œï¼Œå«æ··äº‚ã€‚ã€"},
ESTJ:{role:"å¸•æ–¯",name:"é ˜éšŠæ§åˆ¶å¡”",desc:"è¡Œå‹•æ´¾é ˜å°è€…ï¼Œå‹™å¯¦æœæ–·ã€‚",quote:"ã€Œæ²’è¨ˆç•«çš„æ—…ç¨‹ä¸å«æ—…è¡Œï¼Œå«æ··äº‚ã€‚ã€"},
ISFJ:{role:"å¡é‚¦",name:"è²¼å¿ƒç…§é¡§è€…",desc:"ç´°è†©é«”è²¼ï¼Œå¯é åˆæº«æš–ã€‚",quote:"ã€Œæ²’é—œä¿‚ï¼Œä½ å„˜ç®¡è²·ï¼å†é‡æˆ‘éƒ½å¹«ä½ æ‰›ï¼ã€"},
ESFJ:{role:"å¡é‚¦",name:"ç¤¾äº¤æš–å¿ƒè€…",desc:"æ¨‚æ–¼ç…§é¡§å¤§å®¶ã€ç‡Ÿé€ æº«åº¦ã€‚",quote:"ã€Œæ²’é—œä¿‚ï¼Œä½ å„˜ç®¡è²·ï¼å†é‡æˆ‘éƒ½å¹«ä½ æ‰›ï¼ã€"},
INTP:{role:"å¡é‚¦",name:"åˆ†æä¿®ç†å¸«",desc:"å–œæ­¡ç ”ç©¶ã€å‹•æ‰‹è§£æ±ºå•é¡Œã€‚",quote:"ã€Œæ²’é—œä¿‚ï¼Œä½ å„˜ç®¡è²·ï¼å†é‡æˆ‘éƒ½å¹«ä½ æ‰›ï¼ã€"},
ISTP:{role:"å¡é‚¦",name:"å¯¦ä½œè§£æ±ºè€…",desc:"å‹™å¯¦æ²‰è‘—ã€æœ€æœƒä¿®æ±è¥¿çš„æ—…ä¼´ã€‚",quote:"ã€Œæ²’é—œä¿‚ï¼Œä½ å„˜ç®¡è²·ï¼å†é‡æˆ‘éƒ½å¹«ä½ æ‰›ï¼ã€"},
ENFJ:{role:"å¡ç¾æ‹‰",name:"å…±æ„Ÿå°æ¼”",desc:"æº«æŸ”ç†±æƒ…ã€æƒ…ç·’å…±é³´åŠ›å¼·ã€‚",quote:"ã€Œå“¥æ‹çš„ä¸æ˜¯ç…§ç‰‡ï¼Œæ˜¯å›æ†¶ã€‚ã€"},
ESFP:{role:"å¡ç¾æ‹‰",name:"ç¾å ´æ°£æ°›ç‹",desc:"æ´»æ½‘é–‹æœ—ï¼Œæ„Ÿæ€§åˆæœ‰é­…åŠ›ã€‚",quote:"ã€Œå“¥æ‹çš„ä¸æ˜¯ç…§ç‰‡ï¼Œæ˜¯å›æ†¶ã€‚ã€"},
INFJ:{role:"å¡ç¾æ‹‰",name:"ç†æƒ³è§€æ™¯è€…",desc:"å®‰éœæ·±æƒ…ã€è§€å¯Ÿå…¥å¾®ã€‚",quote:"ã€Œå“¥æ‹çš„ä¸æ˜¯ç…§ç‰‡ï¼Œæ˜¯å›æ†¶ã€‚ã€"},
ISFP:{role:"çš®ç¾…",name:"æº«æŸ”æ”¾ç©ºå®¶",desc:"æº«æŸ”æ”¾é¬†ã€é‡æ„Ÿå—çš„æ—…äººã€‚",quote:"ã€Œä¼‘æ¯ï¼Œä¹Ÿæ˜¯æ—…è¡Œçš„ä¸€éƒ¨åˆ†ã€‚ã€"},
INFP:{role:"çš®ç¾…",name:"å¤¢æƒ³è§€å¯Ÿå®¶",desc:"å…§æ–‚æµªæ¼«ï¼Œæ—…è¡Œæ˜¯å¿ƒéˆç™‚ç™’ã€‚",quote:"ã€Œä¼‘æ¯ï¼Œä¹Ÿæ˜¯æ—…è¡Œçš„ä¸€éƒ¨åˆ†ã€‚ã€"}};

function showResult(role,roleForVideos,mbti){
  const mainImg=document.getElementById("charImg");
  const meta=resultMeta[mbti];
  document.getElementById("title").textContent=`${meta.role} Ã— ${mbti}ï½œ${meta.name}`;
  document.getElementById("subtitle").textContent=meta.desc;
  document.getElementById("quote").textContent=meta.quote;
  const key = `${meta.role}-${mbti}`;
  mainImg.src = resultImages[key] || (roleImg[meta.role]||"");
  mainImg.style.border="none"; mainImg.style.background="transparent";

  const videosMap={"æ—…å…ˆæ£®":[{id:"2EWjKIjkbs8",url:"https://youtu.be/2EWjKIjkbs8",reason:"æ±äº¬å¤œç”Ÿæ´»å»å“ªè£¡ï¼Ÿé€™é‚Šçµ•å°å¯ä»¥å¤§é–‹ä½ çš„çœ¼ç•Œ"},
                              {id:"TGGCPzwE3ZI",url:"https://youtu.be/TGGCPzwE3ZI",reason:"å–œæ­¡å†’éšªï¼Ÿå°åº¦çµ•å°å¯ä»¥ç‚ºä½ çš„å†’éšªæ—¥è¨˜å¯«ä¸‹ç²¾å½©çš„ä¸€é "}],
                    "å¡é‚¦":[{id:"BuVKTJ_sJvc",url:"https://youtu.be/BuVKTJ_sJvc",reason:"è‚‰è‚‰çµ•å°æ˜¯èº«å¼·é«”å£¯çš„å¡é‚¦ä¸å¯æˆ–ç¼ºçš„è›‹ç™½è³ªä¾†æº"},
                            {id:"PoTYEZZDb2A",url:"https://youtu.be/PoTYEZZDb2A",reason:"åƒé£½æ‰èƒ½é ­å¥½å£¯å£¯ï¼Œæœ«æ—¥å‰å¿…åƒé€™ä¸‰å®¶"}],
                    "å¡ç¾æ‹‰":[{id:"xrKUbp1VnQM",url:"https://youtu.be/xrKUbp1VnQM",reason:"åˆ°åº•èª°èªªé‡‘é±—æ¹–å¾ˆç„¡èŠçš„ï¼Ÿç¾åˆ°çˆ†äº†å¥½å—ï¼"},
                             {id:"t9q4EMP-7zo",url:"https://youtu.be/t9q4EMP-7zo",reason:"è¦æ¯”ç¾ï¼Ÿæ³°å§¬ç‘ªå“ˆé™µçµ•å°æ˜¯ç¶²ç¾æ­¤ç”Ÿå¿…è¨ªçš„æ™¯é»ä¹‹ä¸€"}],
                    "å¸•æ–¯":[{id:"8oQZqFzb9pE",url:"https://youtu.be/8oQZqFzb9pE",reason:"åˆ°è¿ªå£«å°¼ã€Œæˆ°é¬¥ã€çµ•å°éœ€è¦è©³ç´°çš„è¦åŠƒ"},
                            {id:"NbwlVmH3S74",url:"https://youtu.be/NbwlVmH3S74",reason:"é€™æ¨£è¦åŠƒè·¯ç·šè³¼è²·ä¼´æ‰‹ç¦®ï¼Œåˆçˆ½åˆé †æš¢"}],
                    "çš®ç¾…":[{id:"OEgDW0wpEAM",url:"https://youtu.be/OEgDW0wpEAM",reason:"å¤§é˜ªåŸå¸‚æ¸¡å‡é¦–é¸é£¯åº—ï¼Œæ•´å¤©åœ¨è£¡é¢Chillå°±å¥½ï¼"},
                            {id:"SAOhPNSst98",url:"https://youtu.be/SAOhPNSst98",reason:"æ›¼è°·çš„ä½å®¿ä¸€å®¶æ¯”ä¸€å®¶å²å®³"}]};
  const vids=videosMap[roleForVideos]||[];
  const vidsEl=document.getElementById("videos"); vidsEl.innerHTML="";
  vids.forEach(v=>{
    const el=document.createElement("div");
    el.className="videoCard";
    el.innerHTML=`<div class="videoReason">${v.reason}</div>
                  <a class="videoThumb" href="${v.url}" target="_blank" rel="noopener">
                    <img src="https://img.youtube.com/vi/${v.id}/hqdefault.jpg" alt="æ¨è–¦å½±ç‰‡ç¸®åœ–">
                  </a>`;
    vidsEl.appendChild(el);
  });

  const partnersByMBTI={ENFP:[{code:"ISTJ",why:"ç†æ€§èˆ‡ç§©åºè®“ä½ çš„éˆæ„Ÿæ›´è½åœ°ã€‚"}, {code:"ENFJ",why:"æƒ…æ„Ÿå…±é³´ï¼Œæ—…é€”æ•…äº‹æ„Ÿæ»¿åˆ†ã€‚"}],
    ENTP:[{code:"ISTP",why:"è¡Œå‹•èˆ‡ä¿®ç†æ”¯æ´ï¼Œå‰µæ„ä¸æ€•å¡é—œã€‚"}, {code:"ESFP",why:"ç¾å ´éˆæ„Ÿäº’æ‹‹ï¼Œæ°£æ°›æ°¸ä¸å†·å ´ã€‚"}],
    ESTP:[{code:"INTJ",why:"ç­–ç•¥è¦åŠƒæ­å³èˆˆè¡Œå‹•ï¼Œä¸€å‹•ä¸€éœå‰›å‰›å¥½ã€‚"}, {code:"ISFP",why:"ä½ è¡ä»–ç©©ï¼Œç¯€å¥è¢«æº«æŸ”æ¢³ç†ã€‚"}],
    INTJ:[{code:"ENFP",why:"éˆæ„Ÿé»ç‡ƒä½ çš„è—åœ–ï¼Œè¨ˆç•«æ›´æœ‰ç”Ÿå‘½åŠ›ã€‚"}, {code:"ISTP",why:"ç­–ç•¥ï¼‹å¯¦ä½œï¼Œç¡¬æ ¸é«˜æ•ˆçµ„åˆã€‚"}],
    ENTJ:[{code:"ENFJ",why:"é ˜å°æ­å…±æ„Ÿï¼Œåœ˜éšŠæ°›åœæœ€ç©©å®šã€‚"}, {code:"ESFJ",why:"ç´°è†©ç…§é¡§ï¼Œä½¿ä½ çš„æ±ºç­–æ›´é †æš¢ã€‚"}],
    ISTJ:[{code:"ESTP",why:"è¦åŠƒæ´¾èˆ‡è¡Œå‹•æ´¾äº’è£œï¼Œæ•ˆç‡èˆ‡åˆºæ¿€å…¼å…·ã€‚"}, {code:"ISFJ",why:"ç©©å®šèˆ‡æº«æŸ”ä¸¦è¡Œï¼Œè®“æ—…ç¨‹æ›´èˆ’å¿ƒã€‚"}],
    ESTJ:[{code:"ESFP",why:"ä½ æŒç¯€å¥ï¼Œä»–å¸¶æ­¡ç¬‘èˆ‡ç¾ç…§ã€‚"}, {code:"INFP",why:"å‰›æŸ”ä¸¦æ¿Ÿï¼Œåš´è¬¹èˆ‡æµªæ¼«äº’èª¿ã€‚"}],
    ISFJ:[{code:"ENTP",why:"ä½ çµ¦å®‰å¿ƒï¼Œä»–çµ¦æ–°æ„ï¼Œæ—…ç¨‹æ›´ç²¾å½©ã€‚"}, {code:"INFP",why:"æº«æŸ”å…±é³´ï¼Œç™‚ç™’ç³»åŒè¡Œã€‚"}],
    ESFJ:[{code:"ENTJ",why:"é ˜å°ï¼‹ç…§é¡§ï¼Œåœ˜éšŠé‹ä½œæœ€æµæš¢ã€‚"}, {code:"INFJ",why:"æƒ…æ„Ÿç†è§£æ·±ï¼Œæ­¥èª¿å’Œè«§ã€‚"}],
    INTP:[{code:"ESTP",why:"å‹•è…¦ï¼‹å‹•æ‰‹ï¼‹æ•¢è¡ï¼Œä»»å‹™é€šé—œç‡é«˜ã€‚"}, {code:"ISTJ",why:"æ¢ç†èˆ‡ç ”ç©¶äº’è£œï¼Œç´°ç¯€åˆ°ä½ã€‚"}],
    ISTP:[{code:"ENFJ",why:"å†·éœé…å…±æ„Ÿï¼Œæ•ˆç‡èˆ‡æº«åº¦å…¼å‚™ã€‚"}, {code:"INTJ",why:"å¯¦ä½œï¼‹ç­–ç•¥ï¼Œè§£é¡Œå¦‚è¡Œé›²æµæ°´ã€‚"}],
    ENFJ:[{code:"ISTP",why:"ä½ å¼•å°æƒ…ç·’ï¼Œä»–è§£æ±ºå•é¡Œï¼Œé›™ä¿éšªã€‚"}, {code:"ENFP",why:"éˆæ„Ÿèˆ‡æº«æš–ä¸¦é€²ï¼Œç«èŠ±åè¶³ã€‚"}],
    ESFP:[{code:"ESTJ",why:"ä»–ç®¡ç¯€å¥ï¼Œä½ ç®¡æ°£æ°›ï¼Œæ—…é€”é›¶å†·å ´ã€‚"}, {code:"ISFP",why:"è‡ªåœ¨åˆæ‹ï¼Œæ„Ÿå—æ´¾é»˜å¥‘æ»¿åˆ†ã€‚"}],
    INFJ:[{code:"ESFJ",why:"è¢«ç†è§£ã€è¢«ç…§é¡§ï¼Œå‰µä½œæ›´æµå‹•ã€‚"}, {code:"ENTP",why:"å®‰éœèˆ‡æ´»åŠ›äº’è£œï¼Œæ•…äº‹å±¤æ¬¡æ›´è±å¯Œã€‚"}],
    ISFP:[{code:"ENTJ",why:"æ–¹å‘æœ‰äººç®¡ï¼Œä½ å°ˆå¿ƒäº«å—é¢¨æ™¯ã€‚"}, {code:"ESFP",why:"æº«æŸ”ï¼‹ç†±æƒ…ï¼Œç…§ç‰‡èˆ‡å›æ†¶éƒ½ç¾ã€‚"}],
    INFP:[{code:"ENFP",why:"è¢«å†’éšªå–šé†’çš„æµªæ¼«éˆé­‚ã€‚"}, {code:"ISFJ",why:"ç´°è†©ç…§é¡§ï¼Œå®‰å¿ƒä¸”ç™‚ç™’ã€‚"}]};
  const partners=(partnersByMBTI[mbti]||[]).map(p=>({meta:resultMeta[p.code], code:p.code, why:p.why}));

  const partnersEl=document.getElementById("partners"); partnersEl.innerHTML="";
  partners.forEach(p=>{
    const m=p.meta;
    const el=document.createElement("div");
    el.className="partner";
    const imgUrl=roleImg[m.role]||"";
    el.innerHTML=`<div class="thumb"><img src="${imgUrl}" alt="${m.role}"></div>
                  <div class="meta"><strong>${m.role} Ã— ${p.code}ï½œ${m.name}</strong>
                    <div class="why">${p.why}</div>
                  </div>`;
    partnersEl.appendChild(el);
  });

  resizePartners();
  window.addEventListener('resize', resizePartners);

  var hi=document.getElementById("heroImg"); if(hi){ hi.style.display="flex"; } document.getElementById("result").classList.add("show");
  window.scrollTo({top:result.offsetTop-8,behavior:'smooth'});
}

function resizePartners(){
  const el=document.getElementById('partners');
  const cards=[...el.children];
  if(cards.length!==2) return;
  const gap=12;
  const innerWidth=el.clientWidth - gap;
  const each=Math.max(210, innerWidth/2);
  cards.forEach(c=>{
    c.style.width=each+'px';
    c.style.flex='0 0 '+each+'px';
  });
}

// Export / Share
document.getElementById("retryBtn").onclick=()=>location.reload();
document.getElementById("exportBtn").onclick=()=>{
  html2canvas(document.getElementById("resContent"), {backgroundColor:"#ffffff", scale:2}).then(canvas=>{
    const a=document.createElement("a"); a.download="TravelFirst_Result.png"; a.href=canvas.toDataURL(); a.click();
  });
};
const shareUrl="https://travelfirst0101.github.io/";
function enc(s){return encodeURIComponent(s);}
function shareText(){ const t=document.getElementById("title").textContent;
  return `æˆ‘çš„æ—…è¡Œäººæ ¼æ˜¯ã€Œ${t}ã€ï¼ä½ æ˜¯å“ªç¨®å°æ—…ä¼´å‘¢ï¼Ÿé©åˆå’Œä½ ä¸€èµ·æ—…è¡Œçš„å°æ—…ä¼´æ˜¯èª°å‘¢ï¼Ÿè¶•å¿«ä¾†æ¸¬è©¦çœ‹çœ‹å§ï¼ ${shareUrl}`;
}
document.getElementById("shareLine").onclick=()=>window.open(`https://line.me/R/msg/text/?${enc(shareText())}`,"_blank");
document.getElementById("shareFB").onclick=()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${enc(shareUrl)}&quote=${enc(shareText())}`,"_blank");
document.getElementById("shareThreads").onclick=()=>window.open(`https://www.threads.net/intent/post?text=${enc(shareText())}`,"_blank");
</script>

<script>
/*MANUAL_NEXT_FALLBACK*/
(function(){
  try{
    var btnNext = document.getElementById('nextBtn');
    var btnPrev = document.getElementById('prevBtn');
    if(btnNext && !btnNext.onclick){
      btnNext.onclick = function(){
        try{
          if(typeof idx==='undefined' || typeof picks==='undefined' || typeof qData==='undefined'){ return; }
          if(picks[idx]==null){ alert("è«‹å…ˆé¸æ“‡ä¸€å€‹é¸é …å–”ï¼"); return; }
          if(idx < qData.length - 1){ idx++; renderQuestion(); }
          else{
            for(var i=0;i<qData.length;i++){ if(picks[i]==null){ idx=i; renderQuestion(); return; } }
            if(typeof goLoadingThenResult==='function') goLoadingThenResult();
          }
        }catch(e){}
      };
    }
  }catch(e){}
})();
</script>


<script>
/*STRICT_NEXT_HANDLER*/
(function(){
  try{
    var btnNext = document.getElementById('nextBtn');
    if(btnNext){
      btnNext.onclick = function(){
        try{
          if(typeof idx==='undefined' || typeof picks==='undefined' || typeof qData==='undefined'){ return; }
          if(picks[idx]==null){ alert("è«‹å…ˆé¸æ“‡ä¸€å€‹é¸é …å–”ï¼"); return; }
          if(idx < qData.length - 1){ idx++; renderQuestion(); }
          else{
            for(var i=0;i<qData.length;i++){ if(picks[i]==null){ idx=i; renderQuestion(); return; } }
            if(typeof goLoadingThenResult==='function') goLoadingThenResult();
          }
        }catch(e){}
      };
    }
  }catch(e){}
})();
</script>


<script>
/*BANNER_VISIBILITY*/
(function(){
  var banner = document.getElementById('topBanner');
  function hideBanner(){ if(banner) banner.style.display='none'; }
  function showBanner(){ if(banner) banner.style.display='block'; }
  // Show on load (intro page)
  showBanner();
  // Hide when starting the quiz
  var sb = document.getElementById('startBtn');
  if(sb){ sb.addEventListener('click', hideBanner); }
  // Also hide whenever questions are rendered
  if(typeof window.renderQuestion === 'function'){
    var _rq = window.renderQuestion;
    window.renderQuestion = function(){
      hideBanner();
      return _rq.apply(this, arguments);
    };
  }
  // If there is a "back to intro" flow in future, you can call showBanner();
})();
</script>
</body>
</html>
